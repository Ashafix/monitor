<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>title</title>
    <link rel="stylesheet" href="style.css">
    <script src="plotly-latest.min.js"></script>
    <script>
      function createRequest() {
        var result = null;
        if (window.XMLHttpRequest) {
          // FireFox, Safari, etc.
          result = new XMLHttpRequest();
          if (typeof result.overrideMimeType != 'undefined') {
            result.overrideMimeType('text/xml'); // Or anything else
          }
        } else if (window.ActiveXObject) {
          // MSIE
          result = new ActiveXObject("Microsoft.XMLHTTP");
        } 
        return result;
      }
    function update_cpu() {
      var req = createRequest(); // defined above
      // Create the callback:
      req.onreadystatechange = function() {
      if (req.readyState != 4) return; // Not there yet
        // Request successful, read the response
        var cpu_avg = document.getElementById('cpu_avg');
        var cpus = document.getElementById('cpus');
        var obj = JSON.parse(req.responseText)
        var layout = {showlegend: false};

        Plotly.newPlot(cpu_avg, obj.averages, layout);
        Plotly.newPlot(cpus, obj.data, layout);
      }
      var url = "http://192.168.178.37:8004/cpu_temperature";
      req.open("GET", url, true);
      req.send();
    }
    update_cpu();
    var t = setInterval(update_cpu, 5000);
    </script>
  </head>
  
  <body>
    <div id="cpu_avg"></div>
    <div id="cpus"></div>
  </body>
</html>

